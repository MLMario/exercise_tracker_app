---
phase: 11-frontend-updates
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/css/styles.css
  - apps/web/src/components/ExercisePickerModal.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User-created exercises display 'CUSTOM' badge in picker"
    - "User exercises appear before system exercises in picker"
    - "Both user and system exercises are sorted alphabetically within their groups"
    - "System exercises appear visually muted compared to user exercises"
  artifacts:
    - path: "apps/web/css/styles.css"
      provides: "Badge styling and exercise item visual hierarchy"
      contains: ".badge-custom"
    - path: "apps/web/src/components/ExercisePickerModal.tsx"
      provides: "Sorting logic and badge rendering"
      contains: "is_system"
  key_links:
    - from: "ExercisePickerModal.tsx"
      to: "Exercise.is_system"
      via: "conditional rendering"
      pattern: "is_system.*false.*badge"
---

<objective>
Add visual distinction between user-created and system exercises in the exercise picker modal.

Purpose: Users need to easily identify their custom exercises among ~800 system exercises in the picker. This completes the v2.7 Pre-Created Exercise Library milestone.

Output: ExercisePickerModal displays user exercises first (with green "CUSTOM" badge) followed by alphabetically-sorted system exercises (visually muted).
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-frontend-updates/11-CONTEXT.md
@.planning/phases/10-backend-updates/10-01-SUMMARY.md
@apps/web/src/components/ExercisePickerModal.tsx
@apps/web/css/styles.css
@badge-mockup.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CSS styles for custom badge and exercise visual hierarchy</name>
  <files>apps/web/css/styles.css</files>
  <action>
Add CSS styles for the exercise picker visual hierarchy. Place these after the existing `.exercise-list` styles (around line 625).

Add the following styles:

1. `.exercise-list-item` - Base clickable item style:
   - `display: flex`, `align-items: center`, `justify-content: space-between`
   - `padding: var(--spacing-sm) var(--spacing-md)`
   - `border-radius: var(--radius-md)`
   - `cursor: pointer`
   - `transition: background-color var(--transition-fast)`

2. `.exercise-list-item:hover` - Hover state:
   - `background-color: rgba(255, 255, 255, 0.05)`

3. `.exercise-list-item.disabled` - Already-added state:
   - `opacity: 0.5`, `cursor: not-allowed`

4. `.exercise-list-item.disabled:hover` - No hover effect:
   - `background-color: transparent`

5. `.exercise-item-info` - Info container:
   - `flex: 1`, `min-width: 0` (for text truncation)

6. `.exercise-item-name` - Exercise name:
   - `font-size: 0.9375rem` (15px), `font-weight: 500`
   - `color: #fafafa` (bright white for user exercises)

7. `.exercise-list-item.system .exercise-item-name` - System exercise name:
   - `color: #a1a1aa` (muted for system exercises)

8. `.exercise-item-category` - Category text (replaces inline badge):
   - `font-size: 0.75rem` (12px)
   - `color: #71717a` (muted gray)

9. `.badge-custom` - Custom badge (from mockup Option B):
   - `font-size: 10px`, `font-weight: 600`
   - `text-transform: uppercase`, `letter-spacing: 0.03em`
   - `padding: 5px 10px`, `border-radius: 100px`
   - `color: #18181b` (dark text)
   - `background: linear-gradient(135deg, #34d399 0%, #10b981 100%)` (green gradient)
   - `box-shadow: 0 1px 3px rgba(16, 185, 129, 0.3)`
   - `flex-shrink: 0` (prevent badge from squishing)

10. `.exercise-list-divider` - Optional divider between custom and library sections:
    - `display: flex`, `align-items: center`, `gap: var(--spacing-sm)`
    - `padding: var(--spacing-sm) var(--spacing-md)`, `margin: var(--spacing-xs) 0`

11. `.exercise-list-divider-line`:
    - `flex: 1`, `height: 1px`, `background: var(--color-border)`

12. `.exercise-list-divider-text`:
    - `font-size: 10px`, `font-weight: 500`
    - `color: #52525b`, `text-transform: uppercase`, `letter-spacing: 0.08em`
  </action>
  <verify>
Run `pnpm --filter @ironlift/web build` to verify no CSS syntax errors.
Visually confirm styles in styles.css match the specification.
  </verify>
  <done>CSS styles for badge, exercise items, and visual hierarchy added to styles.css</done>
</task>

<task type="auto">
  <name>Task 2: Update ExercisePickerModal with sorting and badge</name>
  <files>apps/web/src/components/ExercisePickerModal.tsx</files>
  <action>
Modify ExercisePickerModal.tsx to add sorting and badge display:

1. Update the `filteredExercises` useMemo (around line 99) to sort exercises:
   - After filtering by search query, sort the results
   - Primary sort: `is_system` (false before true, so user exercises first)
   - Secondary sort: `name.localeCompare()` for alphabetical within each group

   Implementation:
   ```typescript
   const filteredExercises = useMemo(() => {
     let result = exercises;

     // Filter by search query
     if (searchQuery) {
       const query = searchQuery.toLowerCase();
       result = result.filter(
         (ex) =>
           ex.name.toLowerCase().includes(query) ||
           ex.category.toLowerCase().includes(query)
       );
     }

     // Sort: user exercises first (is_system=false), then alphabetically
     return [...result].sort((a, b) => {
       // Primary: is_system (false < true, so user exercises first)
       if (a.is_system !== b.is_system) {
         return a.is_system ? 1 : -1;
       }
       // Secondary: alphabetical by name
       return a.name.localeCompare(b.name);
     });
   }, [exercises, searchQuery]);
   ```

2. Update the exercise list rendering (around line 242-256) with new structure:
   - Add `system` class to list item when `exercise.is_system` is true
   - Restructure exercise item to use new CSS classes
   - Add badge for user exercises (`!exercise.is_system`)
   - Display category as text instead of inline badge

   Updated JSX:
   ```tsx
   {filteredExercises.map((exercise) => {
     const isExcluded = excludeIds.includes(exercise.id);
     return (
       <div
         key={exercise.id}
         onClick={() => !isExcluded && handleSelect(exercise)}
         class={`exercise-list-item ${exercise.is_system ? 'system' : ''} ${isExcluded ? 'disabled' : ''}`}
       >
         <div class="exercise-item-info">
           <span class="exercise-item-name">{exercise.name}</span>
           <span class="exercise-item-category">{exercise.category}</span>
         </div>
         {!exercise.is_system && (
           <span class="badge-custom">Custom</span>
         )}
       </div>
     );
   })}
   ```

3. Remove the old inline `.badge.badge-small` styling from the exercise item info.

Note: The 'Other' category is already in CATEGORY_OPTIONS (line 21-30), so UI-03 is already satisfied.
  </action>
  <verify>
Run `pnpm --filter @ironlift/web build` to verify TypeScript compiles without errors.
Run `pnpm --filter @ironlift/web dev` and:
1. Navigate to template editor
2. Click "Add Exercise" to open picker
3. Verify user exercises (if any) appear first with green "CUSTOM" badge
4. Verify system exercises appear after, sorted alphabetically, with muted text
5. Verify search still works correctly
6. Verify "Other" category is available in the create exercise form
  </verify>
  <done>ExercisePickerModal sorts exercises (user first, then system, both alphabetical) and displays "CUSTOM" badge on user-created exercises</done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Build verification:**
   ```bash
   pnpm --filter @ironlift/web build
   ```
   Must complete without errors.

2. **Visual verification:**
   - Open app in browser
   - Navigate to template editor
   - Click "Add Exercise"
   - Confirm user exercises (if any) show green "CUSTOM" badge
   - Confirm system exercises are visually muted (gray text)
   - Confirm sorting: user exercises first, then system, both alphabetical

3. **Functional verification:**
   - Search for exercise name - filtering still works
   - Click user exercise - selects correctly
   - Click system exercise - selects correctly
   - Create new exercise with "Other" category - works
</verification>

<success_criteria>
- UI-01: User-created exercises display green "CUSTOM" badge in picker
- UI-02: Exercise list sorted with user exercises first, system exercises after, both alphabetical
- UI-03: "Other" category available in exercise creation form (already satisfied)
- System exercises have visually muted appearance (gray text)
- Build completes without errors
- Search and selection functionality preserved
</success_criteria>

<output>
After completion, create `.planning/phases/11-frontend-updates/11-01-SUMMARY.md`
</output>
