---
phase: 05-use-gesture-setup
plan: 01
type: execute
depends_on: []
files_modified: [package.json, pnpm-lock.yaml]
---

<objective>
Install @use-gesture/react and verify Preact compatibility for gesture handling

Purpose: Enable useDrag hook for cleaner swipe-to-delete implementation in Phase 6
Output: Library installed and verified working with Preact
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-use-gesture-setup/05-RESEARCH.md

**From research:**
- @use-gesture/react 10.3.1 is the standard library
- @preact/preset-vite already handles React â†’ preact/compat aliasing
- No additional configuration needed

**Current state:**
- SetRow.tsx has ~130 lines of manual pointer event handling (lines 84-206)
- useDrag will reduce this to ~20 lines in Phase 6

**Tech stack available:**
- Preact 10.28.2
- @preact/preset-vite 2.10.2 (handles React aliasing)
- Vite 7.3.1
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install @use-gesture/react</name>
  <files>apps/web/package.json</files>
  <action>Install @use-gesture/react in the web app package. Use pnpm add in the apps/web directory. This is a runtime dependency (not dev). The library works with Preact via existing preact/compat aliasing from @preact/preset-vite.</action>
  <verify>pnpm list @use-gesture/react --filter @ironlift/web shows version installed</verify>
  <done>@use-gesture/react appears in apps/web/package.json dependencies</done>
</task>

<task type="auto">
  <name>Task 2: Verify Preact compatibility with useDrag</name>
  <files>apps/web/src/surfaces/workout/SetRow.tsx</files>
  <action>Add a minimal useDrag import at the top of SetRow.tsx and verify it compiles. Just add `import { useDrag } from '@use-gesture/react'` - do NOT refactor any code yet (that's Phase 6). This verifies the React aliasing works correctly. Run build to confirm no import/resolution errors.</action>
  <verify>pnpm --filter @ironlift/web build succeeds without errors</verify>
  <done>Build passes with useDrag import present, no resolution or type errors</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] @use-gesture/react is in apps/web/package.json dependencies
- [ ] pnpm --filter @ironlift/web build succeeds
- [ ] useDrag import compiles without errors
</verification>

<success_criteria>

- @use-gesture/react installed in web app
- Build passes with import verification
- No TypeScript or resolution errors
- Ready for Phase 6 refactoring
</success_criteria>

<output>
After completion, create `.planning/phases/05-use-gesture-setup/05-01-SUMMARY.md`
</output>
