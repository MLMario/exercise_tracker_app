---
phase: 01-foundation
plan: 01
type: execute
depends_on: []
files_modified: [package.json, vite.config.ts, tsconfig.json]
---

<objective>
Set up build infrastructure for Vite + TypeScript migration.

Purpose: Establish the build tooling foundation that all subsequent phases depend on.
Output: package.json with dependencies, vite.config.ts, tsconfig.json ready for TypeScript development.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/STACK.md
@.planning/codebase/STRUCTURE.md
@js/supabase.js

**Current state:**
- Zero-build vanilla JS app
- Dependencies loaded via CDN (Supabase SDK, Alpine.js, Chart.js)
- No package.json or build tooling
- Config via window globals in config.local.js

**Key constraint:**
- Existing app must continue working during migration
- This plan sets up tooling only - no code conversion yet
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize package.json with dependencies</name>
  <files>package.json</files>
  <action>
Create package.json with:
- name: "exercise-tracker-app"
- type: "module" (ESM)
- scripts: "dev" (vite), "build" (vite build), "preview" (vite preview)
- devDependencies: vite@latest, typescript@latest
- dependencies: @supabase/supabase-js@2, alpinejs@3, chart.js@latest

Use npm init -y first, then add dependencies via npm install commands.
Do NOT add any src/ files yet - just the package configuration.
  </action>
  <verify>
- package.json exists with all listed dependencies
- node_modules/ directory created
- package-lock.json exists
  </verify>
  <done>package.json has correct structure, all dependencies installed</done>
</task>

<task type="auto">
  <name>Task 2: Create Vite configuration</name>
  <files>vite.config.ts</files>
  <action>
Create vite.config.ts with:
- defineConfig from 'vite'
- root: '.' (project root)
- publicDir: 'assets' (existing static files)
- build.outDir: 'dist'
- server.open: true (auto-open browser on dev)
- resolve.alias: '@' pointing to './src' for clean imports

Do NOT configure any entry points yet - Vite will auto-detect index.html.
Keep configuration minimal - avoid over-engineering.
  </action>
  <verify>npx vite --version runs without error (Vite CLI accessible)</verify>
  <done>vite.config.ts exists with project-specific settings</done>
</task>

<task type="auto">
  <name>Task 3: Create TypeScript configuration</name>
  <files>tsconfig.json</files>
  <action>
Create tsconfig.json with:
- compilerOptions:
  - target: "ES2020"
  - module: "ESNext"
  - moduleResolution: "bundler"
  - strict: true
  - noEmit: true (Vite handles transpilation)
  - esModuleInterop: true
  - skipLibCheck: true
  - resolveJsonModule: true
  - isolatedModules: true
  - jsx: "preserve" (in case Alpine needs it later)
  - lib: ["ES2020", "DOM", "DOM.Iterable"]
  - baseUrl: "."
  - paths: { "@/*": ["./src/*"] } (match Vite alias)
- include: ["src/**/*", "vite.config.ts"]
- exclude: ["node_modules", "dist"]

Use strict mode from the start - catches errors early.
  </action>
  <verify>npx tsc --noEmit runs (may have no files yet, that's OK)</verify>
  <done>tsconfig.json exists with strict TypeScript settings</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] package.json exists with vite, typescript, and app dependencies
- [ ] node_modules/ populated
- [ ] vite.config.ts exists and is valid
- [ ] tsconfig.json exists and is valid
- [ ] `npx vite --version` shows Vite version
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Build infrastructure ready for source files
- No changes to existing js/ or index.html (those come in Plan 02)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
