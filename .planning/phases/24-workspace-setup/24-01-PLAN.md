---
phase: 24-workspace-setup
plan: 01
type: execute
depends_on: []
files_modified: [package.json, pnpm-workspace.yaml, .gitignore]
---

<objective>
Set up pnpm monorepo workspace structure for multi-platform support.

Purpose: Convert npm project to pnpm workspace to enable shared packages between web and future iOS app.
Output: pnpm monorepo with workspace configuration ready for package extraction.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@package.json

**Tech stack:**
- Current: npm with package-lock.json
- Target: pnpm with workspaces

**Established patterns:**
- TypeScript strict mode
- Vite build pipeline
- ES modules (type: module)

**Note on folder rename:**
The roadmap mentions renaming `exercise_tracker_app` to `ironlift_app`. This should be done by the user AFTER Phase 29 completes, as renaming the working directory mid-session would break the shell context. The monorepo structure works regardless of the root folder name.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert npm to pnpm</name>
  <files>package.json, pnpm-lock.yaml, .gitignore</files>
  <action>
    1. Delete package-lock.json (npm lockfile replaced by pnpm)
    2. Run `pnpm install` to generate pnpm-lock.yaml
    3. Update .gitignore to exclude pnpm-debug.log if not already present
    4. Verify node_modules structure works with pnpm (should be unchanged for single-package project)
  </action>
  <verify>pnpm install completes successfully, pnpm-lock.yaml exists, npm run dev still works</verify>
  <done>pnpm-lock.yaml created, package-lock.json deleted, dev server starts</done>
</task>

<task type="auto">
  <name>Task 2: Create pnpm workspace configuration</name>
  <files>pnpm-workspace.yaml, package.json</files>
  <action>
    1. Create pnpm-workspace.yaml at project root with:
       ```yaml
       packages:
         - 'packages/*'
         - 'apps/*'
       ```
    2. Update root package.json:
       - Add "name": "ironlift" (monorepo root name)
       - Add "private": true (monorepo root should not be published)
       - Keep existing scripts for now (will be moved to apps/web in Phase 26)
    3. Create empty directories: packages/ and apps/ as workspace placeholders
  </action>
  <verify>pnpm install detects workspace (shows "Scope: all X projects"), directories exist</verify>
  <done>pnpm-workspace.yaml exists, packages/ and apps/ directories created, pnpm recognizes workspace</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] pnpm-lock.yaml exists, package-lock.json deleted
- [ ] pnpm-workspace.yaml exists with packages/* and apps/* globs
- [ ] packages/ and apps/ directories exist
- [ ] `pnpm install` completes without errors
- [ ] `pnpm run dev` starts the Vite dev server
- [ ] `pnpm run build` produces dist/ output
</verification>

<success_criteria>

- pnpm workspace configured and functional
- Development workflow unchanged (dev, build, preview commands work)
- Ready for Phase 25 (extract shared package)
</success_criteria>

<output>
After completion, create `.planning/phases/24-workspace-setup/24-01-SUMMARY.md`:

# Phase 24 Plan 01: Workspace Setup Summary

**[What was accomplished in one line]**

## Accomplishments
- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified
- `pnpm-workspace.yaml` - Workspace configuration
- `pnpm-lock.yaml` - pnpm lockfile
- `package.json` - Updated for monorepo root
- `.gitignore` - Updated if needed

## Decisions Made
[Any decisions made during execution]

## Issues Encountered
[Problems and resolutions, or "None"]

## Next Phase Readiness
Ready for Phase 25: Extract Shared Package
</output>
