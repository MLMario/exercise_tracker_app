---
phase: 02-type-system
plan: 01
type: execute
depends_on: []
files_modified: [src/types/database.ts]
---

<objective>
Create TypeScript type definitions for the Supabase database schema.

Purpose: Provide compile-time type safety for all database operations, enabling IDE autocomplete and catching type errors during development.
Output: `src/types/database.ts` with complete type definitions for all Supabase tables.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./02-01-summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@.planning/phases/01-foundation/01-02-SUMMARY.md

**Tech stack available:** Vite 7.3.1, TypeScript 5.9.3, @supabase/supabase-js 2.90.1
**Established patterns:** ESM modules, strict TypeScript, bundler moduleResolution

**Database tables (from js/ service modules):**
- `exercises` - id, user_id, name, category, equipment
- `templates` - id, user_id, name, created_at, updated_at
- `template_exercises` - id, template_id, exercise_id, default_rest_seconds, order
- `template_exercise_sets` - template_exercise_id, set_number, weight, reps
- `workout_logs` - id, user_id, template_id, started_at, created_at
- `workout_log_exercises` - id, workout_log_id, exercise_id, rest_seconds, order
- `workout_log_sets` - id, workout_log_exercise_id, set_number, weight, reps, is_done

**Source files for reference:**
@js/exercises.js
@js/templates.js
@js/logging.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create database types module</name>
  <files>src/types/database.ts</files>
  <action>
Create comprehensive TypeScript types for the Supabase database schema:

1. **Row types** (what you get from SELECT):
   - `Exercise` - id (string/uuid), user_id (string/uuid | null for global), name (string), category (ExerciseCategory), equipment (string | null)
   - `Template` - id, user_id, name, created_at (string/ISO), updated_at (string/ISO)
   - `TemplateExercise` - id, template_id, exercise_id, default_rest_seconds (number), order (number)
   - `TemplateExerciseSet` - template_exercise_id, set_number (number), weight (number), reps (number)
   - `WorkoutLog` - id, user_id, template_id (string | null), started_at (string/ISO), created_at (string/ISO)
   - `WorkoutLogExercise` - id, workout_log_id, exercise_id, rest_seconds (number), order (number)
   - `WorkoutLogSet` - id, workout_log_exercise_id, set_number (number), weight (number), reps (number), is_done (boolean)

2. **Insert types** (what you pass to INSERT - omit auto-generated fields):
   - `ExerciseInsert` - Omit<Exercise, 'id'>
   - `TemplateInsert` - Omit<Template, 'id' | 'created_at' | 'updated_at'>
   - etc.

3. **Update types** (Partial of insertable fields):
   - `ExerciseUpdate` - Partial<ExerciseInsert>
   - etc.

4. **Enum/union types:**
   - `ExerciseCategory` - 'Chest' | 'Back' | 'Shoulders' | 'Legs' | 'Arms' | 'Core'

5. **Joined/nested types** (for complex queries with relations):
   - `TemplateWithExercises` - Template with exercises array including sets
   - `WorkoutLogWithExercises` - WorkoutLog with exercises array including sets

Use JSDoc comments for documentation. Export all types.
  </action>
  <verify>npx tsc --noEmit passes without errors</verify>
  <done>src/types/database.ts exists with all table types, insert types, update types, and joined types. TypeScript compilation succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Create types barrel export</name>
  <files>src/types/index.ts</files>
  <action>
Create a barrel export file that re-exports all types from database.ts:

```typescript
export * from './database';
```

This establishes the pattern for the types directory and allows clean imports like `import { Exercise } from '@/types'`.
  </action>
  <verify>npx tsc --noEmit passes</verify>
  <done>src/types/index.ts exists and re-exports database types</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes without errors
- [ ] src/types/database.ts contains all 7 table row types
- [ ] src/types/database.ts contains insert and update variants
- [ ] src/types/database.ts contains ExerciseCategory union type
- [ ] src/types/database.ts contains joined types for templates and workout logs
- [ ] src/types/index.ts re-exports all database types
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Database types match the schema inferred from existing JS service modules
</success_criteria>

<output>
After completion, create `.planning/phases/02-type-system/02-01-SUMMARY.md`
</output>
