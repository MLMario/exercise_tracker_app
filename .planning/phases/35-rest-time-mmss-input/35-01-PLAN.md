---
phase: 35-rest-time-mmss-input
plan: 01
type: execute
depends_on: []
files_modified:
  - apps/web/src/surfaces/template-editor/ExerciseEditor.tsx
  - apps/web/css/styles.css
---

<objective>
Create MM:SS time input with auto-formatting and ±10s adjustment buttons for the template editor rest timer.

Purpose: Replace the plain seconds input with a mockup-style inline timer bar with intuitive MM:SS display and quick adjustment buttons.
Output: ExerciseEditor with horizontal inline rest timer layout matching mock-2-dense-grid.html design.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/34-set-table-grid-redesign/34-01-SUMMARY.md
@apps/web/src/surfaces/template-editor/ExerciseEditor.tsx
@apps/web/css/styles.css
@mockups/mock-2-dense-grid.html

**Design from mockup (lines 669-676):**
```html
<div class="rest-timer-inline">
  <button type="button" class="btn-timer-adjust">-10s</button>
  <div class="rest-timer-bar">
    <div class="rest-timer-bar-fill"></div>
  </div>
  <span class="rest-timer-time">2:00</span>
  <button type="button" class="btn-timer-adjust">+10s</button>
</div>
```

**Current state (ExerciseEditor.tsx lines 148-159):**
- Plain number input with "seconds" suffix
- No MM:SS formatting
- No adjustment buttons

**CSS available:** `.rest-timer-inline`, `.rest-timer-bar`, `.rest-timer-time`, `.btn-timer-adjust` already exist from Phase 32 (rest timer bar redesign for WorkoutSurface). These can be reused directly.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update ExerciseEditor JSX for inline rest timer with MM:SS</name>
  <files>apps/web/src/surfaces/template-editor/ExerciseEditor.tsx</files>
  <action>
Replace the `.rest-time-row` section (lines 148-159) with:

1. Add helper function to format seconds to MM:SS:
```tsx
const formatTime = (seconds: number): string => {
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins}:${secs.toString().padStart(2, '0')}`;
};
```

2. Add handlers for ±10s buttons:
```tsx
const handleDecreaseTime = (): void => {
  const newTime = Math.max(0, exercise.default_rest_seconds - 10);
  onUpdateRestTime(newTime);
};

const handleIncreaseTime = (): void => {
  onUpdateRestTime(exercise.default_rest_seconds + 10);
};
```

3. Replace rest-time-row div with rest-timer-inline layout:
```tsx
<div class="rest-timer-inline">
  <button type="button" class="btn-timer-adjust" onClick={handleDecreaseTime}>-10s</button>
  <div class="rest-timer-bar">
    <div class="rest-timer-bar-fill idle"></div>
  </div>
  <span class="rest-timer-time">{formatTime(exercise.default_rest_seconds)}</span>
  <button type="button" class="btn-timer-adjust" onClick={handleIncreaseTime}>+10s</button>
</div>
```

Note: In template editor context, the bar is purely visual (always full/idle state) since we're not actively timing. The bar provides visual consistency with WorkoutSurface while the ±10s buttons enable quick time adjustment.

Remove the old handleRestTimeChange function as it's no longer needed.
  </action>
  <verify>TypeScript compiles: `cd apps/web && npx tsc --noEmit`</verify>
  <done>ExerciseEditor shows inline timer bar with MM:SS display and ±10s buttons; old seconds input removed</done>
</task>

<task type="auto">
  <name>Task 2: Add template editor specific rest timer CSS adjustments</name>
  <files>apps/web/css/styles.css</files>
  <action>
The core `.rest-timer-inline`, `.rest-timer-bar`, `.rest-timer-time`, and `.btn-timer-adjust` classes already exist (lines 2051-2115).

Add template editor context styling at the end of the Template Editor Set Table section (after line 2010):

```css
/* Rest Timer Inline for Template Editor */
.exercise-editor-card .rest-timer-inline {
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-sm);
  border-top: 1px solid var(--color-border);
}

/* Template editor uses idle state always (bar full) */
.exercise-editor-card .rest-timer-bar-fill {
  width: 100%;
}
```

This ensures the template editor rest timer:
- Has proper spacing within the card body
- Shows the bar in full/idle state (no animation in editor context)
  </action>
  <verify>Visual inspection: dev server shows inline timer bar with gradient fill, ±10s buttons, and MM:SS time display</verify>
  <done>Rest timer inline layout styled correctly in template editor cards</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `cd apps/web && npx tsc --noEmit` passes
- [ ] `pnpm run build` succeeds without errors
- [ ] Template editor shows inline rest timer with [-10s] [bar] [M:SS] [+10s] layout
- [ ] ±10s buttons adjust the time correctly (60s → 50s on -10s, 60s → 70s on +10s)
- [ ] Time displays in MM:SS format (60 → "1:00", 90 → "1:30", 120 → "2:00")
- [ ] Timer bar shows full gradient (idle state in editor)
</verification>

<success_criteria>

- Both tasks completed
- All verification checks pass
- No TypeScript errors
- Rest timer matches mockup design
- MM:SS formatting works correctly
  </success_criteria>

<output>
After completion, create `.planning/phases/35-rest-time-mmss-input/35-01-SUMMARY.md`
</output>
