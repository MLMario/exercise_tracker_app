---
phase: 34-set-table-grid-redesign
plan: 01
type: execute
depends_on: []
files_modified:
  - apps/web/src/surfaces/template-editor/ExerciseEditor.tsx
  - apps/web/css/styles.css
domain: ui
---

<objective>
Update set table in ExerciseEditor to match mockup grid layout (32px|1fr|1fr|36px), style inputs and set number badge matching workout-surface design.

Purpose: Align template editor set table with dense grid mockup for visual consistency across surfaces.
Output: Styled set table with mockup grid columns, set number badges, and styled inputs.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/33-exercise-card-layout/33-01-SUMMARY.md
@mockups/mock-2-dense-grid.html (lines 294-409: SET TABLE section)
@apps/web/src/surfaces/template-editor/ExerciseEditor.tsx
@apps/web/css/styles.css (lines 1561-1630: current .set-table, .set-row, .set-input)

**Mockup target (from mock-2-dense-grid.html):**
- Grid: `grid-template-columns: 32px 1fr 1fr 36px`
- Set header: font-mono 9px uppercase muted (#71717a), labels "#", "lbs", "Reps"
- Set number: 28x28px badge, bg-primary, border, rounded-sm, font-mono 12px bold
- Set input: 32px height, font-mono 14px, centered, bg-primary border, no spinners
- Delete column: 32x32px checkbox-style button (transparent, border, rounded)

**Current state:**
- Grid: `50px 1fr 1fr 50px` (too wide)
- Header: "Set" label (should be "#")
- Set number: basic display without badge styling
- Delete button: text "✕" button with btn-danger class
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update ExerciseEditor JSX for mockup set table structure</name>
  <files>apps/web/src/surfaces/template-editor/ExerciseEditor.tsx</files>
  <action>
Update the set table JSX in ExerciseEditor:

1. Change header labels from "Set" to "#" (matching mockup)
2. Wrap set number in a styled badge div (class="set-number")
3. Replace the delete button in the last column with a checkbox-style button:
   - Change from `<button class="btn btn-icon btn-danger btn-small">` with text "✕"
   - To: `<button class="btn-delete-set" title="Remove Set">` with SVG X icon
   - Always show the delete button (mockup has no length check), but KEEP the `exercise.sets.length > 1` guard for behavior preservation

SVG for delete button (matching mockup X icon):
```jsx
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
  <line x1="18" y1="6" x2="6" y2="18"></line>
  <line x1="6" y1="6" x2="18" y2="18"></line>
</svg>
```

Keep all existing functionality (handleWeightChange, handleRepsChange, onRemoveSet).
  </action>
  <verify>TypeScript compiles: `cd apps/web && npx tsc --noEmit`</verify>
  <done>ExerciseEditor set table JSX matches mockup structure with "#" header, badge, and styled delete button</done>
</task>

<task type="auto">
  <name>Task 2: Add CSS for template editor set table matching mockup</name>
  <files>apps/web/css/styles.css</files>
  <action>
Add/update CSS for `.exercise-editor-card` set table. Add these styles AFTER the existing `.exercise-editor-card .set-row` rule (around line 1945):

```css
/* Template Editor Set Table - Dense Grid Layout */
.exercise-editor-card .set-table {
  margin-top: var(--spacing-md);
}

.exercise-editor-card .set-header {
  display: grid;
  grid-template-columns: 32px 1fr 1fr 36px;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) 0;
  font-family: var(--font-mono);
  font-size: 0.5625rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-text-muted);
}

.exercise-editor-card .set-row {
  display: grid;
  grid-template-columns: 32px 1fr 1fr 36px;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) 0;
  align-items: center;
  border-bottom: 1px solid var(--color-border-dim);
  background-color: var(--color-bg-surface);
}

.exercise-editor-card .set-row:last-child {
  border-bottom: none;
}

.exercise-editor-card .set-number {
  width: 28px;
  height: 28px;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-dim);
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: 0.75rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-secondary);
}

.exercise-editor-card .set-input {
  width: 100%;
  height: 32px;
  padding: 0 var(--spacing-sm);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-dim);
  border-radius: var(--radius-sm);
  color: var(--color-text-primary);
  font-family: var(--font-mono);
  font-size: 0.875rem;
  font-weight: 500;
  text-align: center;
  transition: all var(--transition-fast);
}

.exercise-editor-card .set-input:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 2px rgba(79, 158, 255, 0.12);
}

/* Hide number spinners */
.exercise-editor-card .set-input::-webkit-inner-spin-button,
.exercise-editor-card .set-input::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.exercise-editor-card .set-input {
  -moz-appearance: textfield;
}

/* Delete set button - checkbox-style */
.exercise-editor-card .btn-delete-set {
  width: 32px;
  height: 32px;
  background: transparent;
  border: 2px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.exercise-editor-card .btn-delete-set:hover {
  border-color: var(--color-danger);
  background: rgba(248, 113, 113, 0.15);
  color: var(--color-danger);
}

.exercise-editor-card .btn-delete-set svg {
  width: 14px;
  height: 14px;
}
```

Also remove the old `.btn-small` styles if only used for set delete (or keep if used elsewhere).
  </action>
  <verify>Dev server shows styled set table with correct grid layout: `pnpm --filter web dev`</verify>
  <done>Set table uses 32px|1fr|1fr|36px grid, inputs are 32px height with mono font, delete button is checkbox-style</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] TypeScript compiles without errors: `cd apps/web && npx tsc --noEmit`
- [ ] Set table header shows "#", "lbs", "Reps" labels
- [ ] Set number is styled badge (28x28, dark bg, border)
- [ ] Set inputs are 32px height, centered, mono font, no spinners
- [ ] Delete button is checkbox-style (32x32, border, X icon)
- [ ] Grid columns match mockup: 32px | 1fr | 1fr | 36px
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Set table visually matches mock-2-dense-grid.html layout
- Existing functionality preserved (add/remove sets, update weight/reps)
</success_criteria>

<output>
After completion, create `.planning/phases/34-set-table-grid-redesign/34-01-SUMMARY.md`
</output>
