---
phase: 23-chart-delete-modal
plan: 01
type: execute
depends_on: []
files_modified: [src/components/index.ts, src/surfaces/dashboard/DashboardSurface.tsx]
---

<objective>
Replace browser confirm() for template deletion with styled ConfirmationModal component.

Purpose: Consistent UX across delete actions - template delete should match chart delete modal pattern.
Output: Template deletion uses ConfirmationModal with danger variant, InfoModal exported from barrel.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/components/ConfirmationModal.tsx
@src/components/InfoModal.tsx
@src/components/index.ts
@src/surfaces/dashboard/DashboardSurface.tsx

**Pattern reference:**
- ConfirmationModal used in WorkoutSurface (lines 917-953)
- Chart delete modal pattern in DashboardSurface (lines 505-532)

**Current state:**
- Template delete uses `window.confirm()` at DashboardSurface.tsx:264
- ConfirmationModal component exists with `confirmVariant: 'danger'` option
- InfoModal created in Phase 22 but not exported from barrel
</context>

<tasks>

<task type="auto">
  <name>Task 1: Export InfoModal from components barrel</name>
  <files>src/components/index.ts</files>
  <action>Add InfoModal export to components barrel. Follow same pattern as ConfirmationModal export - export both component and props type.</action>
  <verify>TypeScript compiles without errors: `npm run build 2>&1 | head -20`</verify>
  <done>InfoModal and InfoModalProps exported from @/components</done>
</task>

<task type="auto">
  <name>Task 2: Replace template confirm() with ConfirmationModal</name>
  <files>src/surfaces/dashboard/DashboardSurface.tsx</files>
  <action>
1. Add imports: Import ConfirmationModal from '@/components'
2. Add state near line 85 (after showDeleteChartModal):
   - `const [showDeleteTemplateModal, setShowDeleteTemplateModal] = useState(false);`
   - `const [pendingDeleteTemplateId, setPendingDeleteTemplateId] = useState<string | null>(null);`
3. Modify handleDeleteTemplate (line 263-280):
   - Remove window.confirm() call
   - Replace with: `setPendingDeleteTemplateId(id); setShowDeleteTemplateModal(true); return;`
4. Add dismissDeleteTemplateModal function (after handleDeleteTemplate):
   ```typescript
   const dismissDeleteTemplateModal = (): void => {
     setShowDeleteTemplateModal(false);
     setPendingDeleteTemplateId(null);
   };
   ```
5. Add confirmDeleteTemplate function:
   ```typescript
   const confirmDeleteTemplate = async (): Promise<void> => {
     const id = pendingDeleteTemplateId;
     setShowDeleteTemplateModal(false);
     setPendingDeleteTemplateId(null);
     if (!id) return;
     // Move existing delete logic here (setError, try/catch, deleteTemplate, loadTemplates)
   };
   ```
6. Render ConfirmationModal after chart delete modal (around line 532):
   ```tsx
   <ConfirmationModal
     isOpen={showDeleteTemplateModal}
     title="Delete Template"
     message="Are you sure you want to delete this template?"
     confirmLabel="Delete"
     cancelLabel="Cancel"
     confirmVariant="danger"
     onConfirm={confirmDeleteTemplate}
     onCancel={dismissDeleteTemplateModal}
   />
   ```

Do NOT modify the existing inline chart delete modal - only add template delete modal.
  </action>
  <verify>`npm run build` succeeds without errors, no `window.confirm` in handleDeleteTemplate</verify>
  <done>Template delete uses styled ConfirmationModal, no browser confirm() dialog</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] No `window.confirm` calls remain in DashboardSurface.tsx
- [ ] ConfirmationModal renders when clicking template delete button
- [ ] Delete confirms on "Delete" click, cancels on "Cancel" or overlay click
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Template deletion shows styled modal matching chart delete UX
- Phase 23 complete
</success_criteria>

<output>
After completion, create `.planning/phases/23-chart-delete-modal/23-01-SUMMARY.md`
</output>
