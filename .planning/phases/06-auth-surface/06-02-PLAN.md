---
phase: 06-auth-surface
plan: 02
type: execute
depends_on: ["06-01"]
files_modified: [src/surfaces/auth/LoginForm.tsx, src/surfaces/auth/RegisterForm.tsx, src/surfaces/auth/AuthSurface.tsx]
---

<objective>
Create Login and Register form components with full functionality matching Alpine.js behavior.

Purpose: Implement the two primary auth flows (login and registration) as Preact components.
Output: Working LoginForm and RegisterForm components integrated into AuthSurface.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-auth-surface/06-01-SUMMARY.md

**Source reference for exact behavior:**
@js/app.js (lines 168-206) - handleAuth method
@js/app.js (lines 208-226) - switchAuthSurface method
@js/app.js (lines 228-240) - togglePasswordVisibility method
@js/app.js (lines 269-271) - validatePasswords method
@index.html (lines 48-172) - Login and Register HTML

**Established patterns:**
- Auth service at src/services/auth.ts
- State lifted to AuthSurface parent component
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LoginForm component</name>
  <files>src/surfaces/auth/LoginForm.tsx</files>
  <action>
Create LoginForm.tsx as a controlled component receiving props from AuthSurface:
- Props interface:
  - email, setEmail (string, function)
  - password, setPassword (function - setter only, value from parent)
  - showPassword, onTogglePassword (boolean, function)
  - error (string)
  - isLoading (boolean)
  - onSubmit (function)
  - onForgotPassword (function)

Render form matching index.html lines 48-98:
- Email input with x-model → value={email} onChange={e => setEmail(e.target.value)}
- Password input with type toggle (showPassword ? 'text' : 'password')
- Password visibility toggle button with eye SVG icons
- "Forgot password?" link calling onForgotPassword
- Submit button with loading state ("Logging in..." vs "Login")
- Error message display when error is truthy

Form submission:
- @submit.prevent → onSubmit={e => { e.preventDefault(); onSubmit(); }}

CSS classes match existing: .input, .btn, .btn-primary, .btn-block, .loading, .error-message

Do NOT duplicate state - all state managed by parent AuthSurface.
  </action>
  <verify>Component renders in isolation with mock props (can test via Storybook-style or parent integration)</verify>
  <done>LoginForm.tsx exists, accepts props, renders form with all UI elements from Alpine version</done>
</task>

<task type="auto">
  <name>Task 2: Create RegisterForm and integrate both into AuthSurface</name>
  <files>src/surfaces/auth/RegisterForm.tsx, src/surfaces/auth/AuthSurface.tsx</files>
  <action>
Create RegisterForm.tsx with props interface:
- email, setEmail
- password, setPassword
- confirmPassword, setConfirmPassword
- showPassword, showConfirmPassword
- onTogglePassword (takes 'register' | 'confirm')
- error, isLoading
- onSubmit

Render form matching index.html lines 100-172:
- Email input
- Password input with visibility toggle
- Confirm password input with visibility toggle
- Password hint ("Minimum 6 characters")
- Submit button ("Creating account..." vs "Create Account")
- Error message display

Update AuthSurface.tsx:
- Import LoginForm and RegisterForm
- Implement handleAuth function (from js/app.js lines 168-206):
  - For login: call auth.login(email, password)
  - For register: validate passwords match, call auth.register(email, password)
  - Handle result.error by setting error state
  - On success: clear form fields, set successMessage
- Add tab navigation UI matching index.html lines 30-43:
  - Two buttons: Login, Register
  - Active state based on authSurface
  - onClick calls switchAuthSurface
- Render LoginForm when authSurface === 'login'
- Render RegisterForm when authSurface === 'register'
- Footer with switch links ("Don't have an account?", "Already have an account?")

Pass all state and handlers as props to child forms.
  </action>
  <verify>npm run build succeeds, Login and Register forms display and switch via tabs</verify>
  <done>Both forms created, integrated into AuthSurface, tab navigation works, form submissions call auth service</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] LoginForm.tsx exists with proper props interface
- [ ] RegisterForm.tsx exists with proper props interface
- [ ] AuthSurface renders correct form based on authSurface state
- [ ] Tab navigation switches between login/register
- [ ] Form submissions call auth.login() or auth.register()
- [ ] Password visibility toggles work
- [ ] Error messages display correctly
</verification>

<success_criteria>

- Login form matches Alpine.js behavior exactly
- Register form matches Alpine.js behavior exactly
- Password confirmation validation works
- Tab navigation between forms works
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/06-auth-surface/06-02-SUMMARY.md`
</output>
