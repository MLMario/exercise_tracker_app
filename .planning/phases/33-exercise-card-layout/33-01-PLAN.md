---
phase: 33-exercise-card-layout
plan: 01
type: execute
depends_on: []
files_modified:
  - apps/web/src/surfaces/template-editor/ExerciseEditor.tsx
  - apps/web/src/surfaces/template-editor/ExerciseList.tsx
  - apps/web/css/styles.css
---

<objective>
Restructure ExerciseEditor card layout to match mockup: Add Set in header, remove category badge, remove move buttons, remove section header.

Purpose: Align template editor exercise cards with the dense grid mockup design for cleaner, more compact cards.
Output: ExerciseEditor cards with Add Set button in header, hover-reveal remove button, and footer Add Exercise button.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@mockups/mock-2-dense-grid.html

**Prior phase context:**
@.planning/phases/32-rest-timer-bar-redesign/32-01-SUMMARY.md

**Relevant source files:**
@apps/web/src/surfaces/template-editor/ExerciseEditor.tsx
@apps/web/src/surfaces/template-editor/ExerciseList.tsx
@apps/web/src/surfaces/template-editor/TemplateEditorSurface.tsx
@apps/web/css/styles.css

**Design reference from mockup:**
- Card header: exercise name (left) + Add Set button + hover-reveal remove button + chevron (right)
- No category badge in header
- No move up/down buttons (reordering removed from template editor)
- Remove button appears on hover (opacity: 0 â†’ 1)
- "Add Exercise" button in footer (full-width primary button)
- No "Exercises" section header with button

**Existing patterns to follow:**
- `.exercise-workout-card .header-actions .btn-add-set` styling from workout accordion
- `.exercise-workout-card .btn-remove` hover-reveal pattern
- Inline flex layout with gap for header actions
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restructure ExerciseEditor card header</name>
  <files>apps/web/src/surfaces/template-editor/ExerciseEditor.tsx</files>
  <action>
Update ExerciseEditor component to match mockup layout:

1. Replace exercise-header structure with card-header matching workout-surface pattern:
   - Remove exercise-title-row, exercise-header-actions divs
   - Add new structure: card-header with exercise-info, header-actions, btn-remove, chevron

2. Remove from header:
   - Category badge (span.badge with exercise.category)
   - Move up button (onMoveUp)
   - Move down button (onMoveDown)

3. Move Add Set button to header:
   - Move from bottom of card to header-actions div
   - Style as `.btn-add-set` with plus icon SVG:
     ```jsx
     <button type="button" class="btn-add-set" onClick={onAddSet} title="Add Set">
       <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
         <line x1="12" y1="5" x2="12" y2="19"></line>
         <line x1="5" y1="12" x2="19" y2="12"></line>
       </svg>
       Add Set
     </button>
     ```

4. Update remove button:
   - Change from visible btn-icon btn-danger to hover-reveal btn-remove
   - Use X icon SVG matching workout-surface:
     ```jsx
     <button type="button" class="btn-remove" onClick={onRemove} title="Remove Exercise">
       <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
         <line x1="18" y1="6" x2="6" y2="18"></line>
         <line x1="6" y1="6" x2="18" y2="18"></line>
       </svg>
     </button>
     ```

5. Remove props that are no longer used:
   - isFirst, isLast, onMoveUp, onMoveDown (remove from props interface and component)

6. Change card wrapper class from `card exercise-editor-card` to `exercise-editor-card` (will add new CSS)

7. Keep all set table and rest time functionality unchanged.
  </action>
  <verify>TypeScript compiles without errors: `cd apps/web && npx tsc --noEmit`</verify>
  <done>ExerciseEditor has Add Set in header, no category badge, no move buttons, hover-reveal remove button</done>
</task>

<task type="auto">
  <name>Task 2: Update ExerciseList - remove section header, add footer</name>
  <files>apps/web/src/surfaces/template-editor/ExerciseList.tsx, apps/web/src/surfaces/template-editor/TemplateEditorSurface.tsx</files>
  <action>
Update ExerciseList component to match mockup:

1. In ExerciseList.tsx:
   - Remove the section-header div entirely (contains "Exercises" h3 and "Add Exercise" button)
   - Add footer-actions div after exercises-list with full-width Add Exercise button:
     ```jsx
     <div class="footer-actions">
       <button
         type="button"
         class="btn btn-primary btn-block"
         onClick={onAddExercise}
         disabled={isSubmitting}
       >
         Add Exercise
       </button>
     </div>
     ```
   - Keep empty-state unchanged

2. In TemplateEditorSurface.tsx:
   - Remove onMoveUp and onMoveDown props from ExerciseList call (no longer needed)
   - Keep handleMoveExerciseUp and handleMoveExerciseDown functions for now (can be removed in cleanup phase if desired)

3. In ExerciseListProps interface:
   - Remove onMoveUp and onMoveDown props
  </action>
  <verify>TypeScript compiles: `cd apps/web && npx tsc --noEmit`</verify>
  <done>Section header removed, Add Exercise button in footer, props cleaned up</done>
</task>

<task type="auto">
  <name>Task 3: Add CSS for exercise editor card layout</name>
  <files>apps/web/css/styles.css</files>
  <action>
Add CSS for exercise editor card matching mockup and workout-surface patterns.

Add to Section 14 (Template Editor Per-Set UI) or create new section after it:

```css
/* ==========================================================================
   Exercise Editor Card - Template Editor Accordion Style
   ========================================================================== */

/* Card Container - matches workout-surface .exercise-workout-card */
.exercise-editor-card {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-dim);
  border-radius: var(--radius-lg);
  overflow: hidden;
  margin-bottom: var(--spacing-md);
}

/* Card Header - clickable accordion trigger (simplified since no expand/collapse in template editor) */
.exercise-editor-card .card-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  transition: background var(--transition-fast);
}

.exercise-editor-card .card-header:hover {
  background: var(--color-bg-elevated);
}

/* Exercise Info */
.exercise-editor-card .exercise-info {
  flex: 1;
  min-width: 0;
}

.exercise-editor-card .exercise-name {
  font-size: 0.9375rem;
  font-weight: 700;
  color: var(--color-text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Header Actions - Add Set button */
.exercise-editor-card .header-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-shrink: 0;
}

/* Add Set Button - matches workout-surface style */
.exercise-editor-card .btn-add-set {
  padding: 6px 10px;
  background: rgba(74, 222, 128, 0.15);
  border: 1px solid rgba(74, 222, 128, 0.3);
  border-radius: var(--radius-sm);
  color: var(--color-success);
  font-family: 'IBM Plex Mono', monospace;
  font-size: 0.625rem;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 4px;
}

.exercise-editor-card .btn-add-set:hover {
  background: var(--color-success);
  border-color: var(--color-success);
  color: white;
}

.exercise-editor-card .btn-add-set svg {
  width: 12px;
  height: 12px;
}

/* Remove Button - hover reveal */
.exercise-editor-card .btn-remove {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  opacity: 0;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.exercise-editor-card .card-header:hover .btn-remove {
  opacity: 1;
}

.exercise-editor-card .btn-remove:hover {
  background: rgba(248, 113, 113, 0.15);
  color: var(--color-danger);
}

.exercise-editor-card .btn-remove svg {
  width: 14px;
  height: 14px;
}

/* Card Body - contains set table and rest timer */
.exercise-editor-card .card-body {
  padding: 0 0.75rem 0.75rem;
  border-top: 1px solid var(--color-border-dim);
}

/* Set table uses existing .set-table, .set-header, .set-row styles */

/* Footer Actions - Add Exercise button */
.footer-actions {
  margin-top: var(--spacing-lg);
}
```

Remove or update these old styles that are no longer needed:
- `.exercise-editor-card .exercise-header` (replaced by .card-header)
- `.exercise-editor-card .exercise-title-row` (removed)
- `.exercise-editor-card .exercise-name` (updated selector above)
- `.exercise-header-actions` (replaced by .header-actions)
  </action>
  <verify>Build succeeds: `cd apps/web && npm run build`</verify>
  <done>CSS updated for new card layout, old styles cleaned up</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `cd apps/web && npx tsc --noEmit` passes
- [ ] `cd apps/web && npm run build` succeeds
- [ ] Dev server shows exercise editor cards with new layout
- [ ] Add Set button in card header works
- [ ] Remove button appears on hover and removes exercise
- [ ] Add Exercise button in footer opens exercise picker
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- ExerciseEditor cards match mockup layout (Add Set in header, no badge, no move buttons)
- Hover-reveal remove button works
- Footer Add Exercise button works
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/33-exercise-card-layout/33-01-SUMMARY.md`
</output>
