---
phase: 27-update-imports
plan: 01
type: execute
depends_on: []
files_modified:
  - apps/web/src/main.tsx
  - apps/web/src/components/ExercisePickerModal.tsx
  - apps/web/src/surfaces/auth/AuthSurface.tsx
  - apps/web/src/surfaces/dashboard/DashboardSurface.tsx
  - apps/web/src/surfaces/dashboard/TemplateList.tsx
  - apps/web/src/surfaces/dashboard/TemplateCard.tsx
  - apps/web/src/surfaces/dashboard/ChartCard.tsx
  - apps/web/src/surfaces/dashboard/AddChartModal.tsx
  - apps/web/src/surfaces/template-editor/TemplateEditorSurface.tsx
  - apps/web/src/surfaces/workout/WorkoutSurface.tsx
---

<objective>
Refactor all imports from @/ path aliases to @ironlift/shared for types and services.

Purpose: Make web app use the shared package correctly, completing the monorepo import structure.
Output: All 11 files updated with proper imports, TypeScript passes, build succeeds.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/26-web-app-migration/26-01-SUMMARY.md

**Import pattern changes:**
- `@/types` → `@ironlift/shared` (types are exported from shared barrel)
- `@/services` → `@ironlift/shared` (services are exported from shared barrel)
- `@/services/auth` → `@ironlift/shared` (auth is exported from barrel)
- `@/components` → KEEP AS IS (local to web app)
- `@/surfaces` → KEEP AS IS (local to web app)

**Example transformations:**
```typescript
// Before
import { auth } from '@/services/auth';
import type { TemplateWithExercises } from '@/types';
import { exercises, templates } from '@/services';

// After
import { auth } from '@ironlift/shared';
import type { TemplateWithExercises } from '@ironlift/shared';
import { exercises, templates } from '@ironlift/shared';
```

**Files requiring updates (11 total):**
1. apps/web/src/main.tsx - types + services/auth
2. apps/web/src/components/ExercisePickerModal.tsx - types
3. apps/web/src/surfaces/auth/AuthSurface.tsx - services/auth
4. apps/web/src/surfaces/dashboard/DashboardSurface.tsx - types + services
5. apps/web/src/surfaces/dashboard/TemplateList.tsx - types
6. apps/web/src/surfaces/dashboard/TemplateCard.tsx - types
7. apps/web/src/surfaces/dashboard/ChartCard.tsx - services
8. apps/web/src/surfaces/dashboard/AddChartModal.tsx - types
9. apps/web/src/surfaces/template-editor/TemplateEditorSurface.tsx - types + services
10. apps/web/src/surfaces/workout/WorkoutSurface.tsx - types + services
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update main.tsx and component imports</name>
  <files>apps/web/src/main.tsx, apps/web/src/components/ExercisePickerModal.tsx</files>
  <action>
In apps/web/src/main.tsx:
- Change `import { auth } from '@/services/auth';` → `import { auth } from '@ironlift/shared';`
- Change `import type { TemplateWithExercises } from '@/types';` → `import type { TemplateWithExercises } from '@ironlift/shared';`
- Keep `import { AuthSurface, DashboardSurface, ... } from '@/surfaces';` unchanged (local)

In apps/web/src/components/ExercisePickerModal.tsx:
- Change `import type { Exercise } from '@/types';` → `import type { Exercise } from '@ironlift/shared';`
  </action>
  <verify>grep -n "@ironlift/shared" apps/web/src/main.tsx apps/web/src/components/ExercisePickerModal.tsx shows new imports</verify>
  <done>main.tsx has @ironlift/shared imports for types and auth. ExercisePickerModal.tsx has @ironlift/shared for Exercise type.</done>
</task>

<task type="auto">
  <name>Task 2: Update surface imports</name>
  <files>apps/web/src/surfaces/auth/AuthSurface.tsx, apps/web/src/surfaces/dashboard/DashboardSurface.tsx, apps/web/src/surfaces/dashboard/TemplateList.tsx, apps/web/src/surfaces/dashboard/TemplateCard.tsx, apps/web/src/surfaces/dashboard/ChartCard.tsx, apps/web/src/surfaces/dashboard/AddChartModal.tsx, apps/web/src/surfaces/template-editor/TemplateEditorSurface.tsx, apps/web/src/surfaces/workout/WorkoutSurface.tsx</files>
  <action>
For each surface file, update imports:

AuthSurface.tsx:
- `import { auth } from '@/services/auth';` → `import { auth } from '@ironlift/shared';`
- Keep `@/components` imports unchanged

DashboardSurface.tsx:
- `import type { Exercise, TemplateWithExercises } from '@/types';` → `import type { Exercise, TemplateWithExercises } from '@ironlift/shared';`
- `import { exercises, templates, logging, charts } from '@/services';` → `import { exercises, templates, logging, charts } from '@ironlift/shared';`
- Keep `@/components` imports unchanged

TemplateList.tsx:
- `import type { TemplateWithExercises } from '@/types';` → `import type { TemplateWithExercises } from '@ironlift/shared';`

TemplateCard.tsx:
- `import type { TemplateWithExercises } from '@/types';` → `import type { TemplateWithExercises } from '@ironlift/shared';`

ChartCard.tsx:
- `import { charts } from '@/services';` → `import { charts } from '@ironlift/shared';`

AddChartModal.tsx:
- `import type { Exercise } from '@/types';` → `import type { Exercise } from '@ironlift/shared';`

TemplateEditorSurface.tsx:
- `import type { TemplateWithExercises, Exercise, ExerciseCategory } from '@/types';` → `import type { TemplateWithExercises, Exercise, ExerciseCategory } from '@ironlift/shared';`
- `import { exercises, templates } from '@/services';` → `import { exercises, templates } from '@ironlift/shared';`
- Keep `@/components` imports unchanged

WorkoutSurface.tsx:
- `import type { TemplateWithExercises, Exercise } from '@/types';` → `import type { TemplateWithExercises, Exercise } from '@ironlift/shared';`
- `import { exercises, logging, templates } from '@/services';` → `import { exercises, logging, templates } from '@ironlift/shared';`
- Keep `@/components` imports unchanged
  </action>
  <verify>grep -r "@/types\|@/services" apps/web/src/surfaces returns no matches (all converted)</verify>
  <done>All surface files updated. No @/types or @/services imports remain. Only @/components and @/surfaces (local) remain.</done>
</task>

<task type="auto">
  <name>Task 3: Verify TypeScript and build</name>
  <files>apps/web/</files>
  <action>
Run TypeScript compilation and Vite build to verify all imports resolve correctly:
1. pnpm --filter @ironlift/web run type-check (or tsc --noEmit)
2. pnpm --filter @ironlift/web run build

If type-check script doesn't exist, run: cd apps/web && npx tsc --noEmit

Fix any import errors that arise.
  </action>
  <verify>pnpm --filter @ironlift/web build succeeds with no errors</verify>
  <done>TypeScript passes. Build produces dist/ with no errors.</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] No `@/types` imports remain in apps/web/src/
- [ ] No `@/services` imports remain in apps/web/src/
- [ ] `@/components` and `@/surfaces` imports preserved (local)
- [ ] TypeScript compilation passes (no type errors)
- [ ] Vite build succeeds
</verification>

<success_criteria>

- All 11 files updated with @ironlift/shared imports
- No @/types or @/services imports remain
- @/components and @/surfaces local imports preserved
- TypeScript passes
- Build succeeds
- Phase 27 complete
</success_criteria>

<output>
After completion, create `.planning/phases/27-update-imports/27-01-SUMMARY.md`
</output>
