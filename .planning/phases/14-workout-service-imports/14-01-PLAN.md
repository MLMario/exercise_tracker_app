---
phase: 14-workout-service-imports
plan: 01
type: execute
depends_on: []
files_modified: [src/surfaces/workout/WorkoutSurface.tsx, src/surfaces/template-editor/TemplateEditorSurface.tsx]
---

<objective>
Update WorkoutSurface.tsx and TemplateEditorSurface.tsx to use direct TypeScript service imports instead of window globals.

Purpose: Remove reliance on legacy window.* exports, enabling future removal of window exports from services.
Output: Both surface files import and call services directly via @/services.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Relevant source files:
@src/services/index.ts
@src/surfaces/workout/WorkoutSurface.tsx
@src/surfaces/template-editor/TemplateEditorSurface.tsx

# Established pattern (from DashboardSurface.tsx, ChartCard.tsx):
# import { exercises, templates, logging } from '@/services';
# Then call: exercises.getExercises() instead of window.exercises.getExercises()

# Current window.* calls to replace:

## WorkoutSurface.tsx:
# - window.exercises.getExercises() - line 264
# - window.logging.createWorkoutLog() - line 580
# - window.templates.updateTemplate() - line 613
# - window.exercises.createExercise() - line 812
# - window.exercises.getExercises() - line 821

## TemplateEditorSurface.tsx:
# - window.exercises.getExercises() - line 131
# - window.templates.updateTemplate() - line 186
# - window.templates.createTemplate() - line 195
# - window.exercises.createExercise() - line 396
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update WorkoutSurface.tsx to use direct imports</name>
  <files>src/surfaces/workout/WorkoutSurface.tsx</files>
  <action>
1. Add import at top of file after existing imports:
   `import { exercises, logging, templates } from '@/services';`

2. Replace all window.* calls with direct service calls:
   - Line 264: `window.exercises.getExercises()` -> `exercises.getExercises()`
   - Line 580: `window.logging.createWorkoutLog(workoutData)` -> `logging.createWorkoutLog(workoutData)`
   - Line 613: `window.templates.updateTemplate(...)` -> `templates.updateTemplate(...)`
   - Line 812: `window.exercises.createExercise(...)` -> `exercises.createExercise(...)`
   - Line 821: `window.exercises.getExercises()` -> `exercises.getExercises()`

No other changes. The service methods have identical signatures.
  </action>
  <verify>npm run build completes without TypeScript errors</verify>
  <done>WorkoutSurface.tsx imports services directly, no window.* calls remain for exercises/logging/templates</done>
</task>

<task type="auto">
  <name>Task 2: Update TemplateEditorSurface.tsx to use direct imports</name>
  <files>src/surfaces/template-editor/TemplateEditorSurface.tsx</files>
  <action>
1. Add import at top of file after existing imports:
   `import { exercises, templates } from '@/services';`

2. Replace all window.* calls with direct service calls:
   - Line 131: `window.exercises.getExercises()` -> `exercises.getExercises()`
   - Line 186: `window.templates.updateTemplate(...)` -> `templates.updateTemplate(...)`
   - Line 195: `window.templates.createTemplate(...)` -> `templates.createTemplate(...)`
   - Line 396: `window.exercises.createExercise(...)` -> `exercises.createExercise(...)`

No other changes. The service methods have identical signatures.
  </action>
  <verify>npm run build completes without TypeScript errors</verify>
  <done>TemplateEditorSurface.tsx imports services directly, no window.* calls remain for exercises/templates</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] No `window.exercises`, `window.templates`, or `window.logging` references in modified files
- [ ] App runs and workout/template features work correctly
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- WorkoutSurface.tsx uses direct service imports
- TemplateEditorSurface.tsx uses direct service imports
- No remaining window.* service calls in either file
  </success_criteria>

<output>
After completion, create `.planning/phases/14-workout-service-imports/14-01-SUMMARY.md`:

# Phase 14 Plan 01: Workout Service Imports Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

[Ready for Phase 15 or next action]
</output>
